# 数据库 4 个基本概念
## 数据
数据是数据库中存储的基本对象。  
>[!note] 数据
描述事物的符号记录称为数据。可以是数字、文本（text）、图形（graph）、图像（image）、音频（audio）、视频（video）等。  
数据的解释是指对数据含义的说明，数据的含义称为数据的语义，**数据与其语义是不可分的**。  
记录是计算机中表示和存储数据的一种格式或一种方法。

---
## 数据库
>[!note] 数据库
数据库是长期存储在计算机内、有组织的、可共享的大量数据的集合。数据库中的数据按一定的数据模型组织、描述和储存，具有较小的冗余度（redundancy）、较高的数据独立性（data independency）和易扩展性（scalability），并可为各种用户共享。

- 数据库数据具有永久存储、有组织和可共享三个基本特点。
- 数据库中的数据存储在若干个操作系统文件中。
- 每个文件中即存储了关系中的数据又存储了关系的结构，用户不能对文件直接操作，必须通过 DBMS。

数据库是以一定的组织方式将相关数据组织在一起存储在磁盘上所形成的、能为多个用户共享的、与应用程序彼此独立的一组相互关联的数据的集合。

---
## 数据库管理系统
数据库管理系统是位于用户与操作系统之间的一层数据管理软件。数据库管理系统和操作系统一样是计算机的基础软件，也是一个大型复杂的软件系统。它的主要功能包括以下几个方面：

1. 数据定义功能  
    数据库管理系统提供数据定义语言（Data Definition Language，DDL），用户通过它可以方便的对数据库中的数据对象的组成和结构进行定义。
    
2. 数据组织、存储和管理  
    数据库管理系统要分类组织、存储和管理各种数据，包括数据字典、用户数据、数据的存取路径等。要确定以何种文件结构和存取方式在存储级上组织这些数据，如何实现数据之间的联系。数据组织和存储的基本目标是提高存储空间利用率和方便存取，提供多种存取方法（如索引查找、hash 查找、顺序查找等）来提高存取效率。
    
3. 数据操纵功能  
    数据库管理系统提供数据操纵语言（Data Manipulation Language，DML），用户可以使用它操纵数据，实现对数据库的基本操作，如查询、插入、删除和修改等。
    
4. 数据库的事务管理和运行管理  
    数据库在建立、运用和维护时由数据库管理系统统一管理和控制，以保证事务的正确运行，保证数据的安全性、完整性、多用户对数据的并发使用及发生故障后的系统修复。
    
5. 数据库的建立和维护功能  
    数据库的建立和维护功能包括数据库初始数据的输入、转换功能，数据库的转储恢复功能，数据库的重组织功能和性能监视、分析功能等。这些功能通常是由一些实用程序或管理工具完成的。
    
6. 其他功能  
    其他功能包括数据库管理系统与网络中其他软件系统的通信功能，一个数据库管理系统与另一个数据库管理系统或文件系统的数据转换功能，异构数据库之间的互访和互操作功能。
    

- DBMS 是用户与数据库交互的桥梁，是数据库系统的核心。
- DBMS 在操作系统的支持下工作
- DBMS 支持其上的应用开发工具

---
## 数据库系统
>[!note] 数据库系统
>数据库系统是由数据库、数据库管理系统（及其应用开发工具）、应用程序和数据库管理员（DataBase Administrator，DBA）组成的存储、管理、处理和维护数据的系统。

---
# 为什么需要数据库

如果没有数据库，我们要怎么存储数据？

> 没有数据库的情况下，为了存储数据，我们需要创建文件系统，先设计一个文件存储格式，对这个文件进行增删改查操作

例如，我们可以创建一个 `txt` 格式的文本文档，在里面按行插入数据

这样听起来很简单，但是有很多缺点

1. 信息冗余
    - 例子
        
        如果某个学生有两个专业（如音乐和数学），他的地址和电话号码就可能同时出现在包含音乐系学生记录的文件和数学系学生记录的文件
        
2. 访问困难
    - 例子
        
        如果今天数据操作人员需要居住在某个地方的学生名单，而原来的程序并没有实现这个功能，只实现了生成所有学生名单的功能，我们只能要求设计人员去改程序，增加这个功能，而改天我们需要查询选课学时超过 $60$﻿h的学生，我们又只能改程序。
        
3. 数据孤立
    - 例子
        
        数据分散在不同文件，可能存储格式都不一样，要编写新的程序来查询数据是很困难的
        
4. 完整性约束
    - 例子
        
        数据库的一些值需要满足一些条件，这个条件就是完整性约束
        
        例如，我们要求生日日期只能是一串数字，不能是特殊字符
        
        这实现起来不难，但是如果我们需要添加新的约束，就必须修改程序，如果有多个程序都使用这个文件，那就必须一起修改，这是很麻烦的
        
5. 原子性问题
    - 例子
        
        计算机系统有时会发生故障，我们需要保证数据可以恢复到以前的一致的状态
        
        如果A要给B转账200元，但是程序执行时发生了故障，A的余额中减去的200元没有存入B的余额中，这就是数据状态的不一致，我们要避免这种情况
        
        A的余额-200元和B的余额加200元，这两个事件要不都发生，要不都不发生，也就是说这个两个操作必须变成一个操作，也就是是原子的
        
        在传统的文件处理系统中，这是很难做到的
        
6. 并发访问异常
    - 例子
        
        为了提高访问速度和效率，很多系统允许多个用户同时操作数据，例如网络购物的订单系统，虽然两个人同时修改数据的概率很低，但是每天都有几百万人访问，这样还是有很大概率出现两个人同时修改数据的情况，这样并发的控制就可能异常，如果两个人同时从公司帐号取出200元和500元，这样的并发访问就可能使得数据错误，两个程序并发执行，他们可能读取到的余额都是10000元，并且分别写入9800元和9500元，最后帐户中还剩多少余额，是由哪个程序后写入结果决定，但是不管写入哪个都是错误的，账户的余额应该是9300元
        
        为了消除这种情况，程序必须协调管理，但是由于数据允许多个程序访问，在所有访问数据的程序中，都必须添加协调措施，如果要添加新的程序，必须和之前的全部程序协调，这样是很麻烦的
        
          
        
7. 安全性问题
    - 例子
        
        不是所有数据都可以让所有人访问，比如我们不能访问并且修改银行的余额数据
        
        这就需要实现安全性约束，对于一些用户，只能访问他们该访问的数据
        

  

这些问题的确可以每个程序单独处理，但是这是一个广泛的问题

我们完全可以通过用数据库全部解决，制造轮子

---

# 数据视图

为了简化数据访问，我们使用数据视图概念

数据视图分为三层：

1. 视图层
2. 逻辑层
3. 物理层

视图层是业务查询用的（例如写 `SELECT` ）

逻辑层是给数据库开发人员用的（例如设计表结构）

物理层是具体存储数据在磁盘用的

---

# 实例与模式

数据库的总体设计称为**数据库模式**

而当我们存入数据，就有了一个具体的数据库，这个具体的数据库称为**数据库实例**

在物理层，我们有**物理模式**，在逻辑层，我们有**逻辑模式**

---

# 数据模型

数据模型是描述物理层、逻辑层、视图层的设计方式的

也就是你这个数据库总体来看是什么样的（数据库的类型）

有以下数据模型，也许还有更多：

1. 关系模型
2. 实体—联系数据模型
3. 基于对象的数据模型
4. 半结构化的数据模型
5. 层次数据模型
6. 网状数据模型

关系模型：用表来表示数据和数据的联系

实体—联系模型（E-R模型）：用称为实体的对象和对象的联系表示

基于对象的的数据模型：对E-R模型进行面向对象的封装，添加方法后的扩展

半结构化的数据模型：相同类型的数据项含有不同属性集，用可扩展标记语言（XML）表示

层次数据模型和网状数据模型：早期使用的数据模型，很复杂而且操作不方便，已经几乎淘汰

---

# 数据库语言

数据库语言提供以下操作：

1. 数据定义语言（DDL）—定义数据库模式
2. 数据操纵语言（DML）—查询和更改