---
title: 计算机网络笔记
date: 2023.01.27 23:07:45
author: xeonds
toc: true
excerpt: 物理层重点是信号的几种编码方式：两种NRZ，两种曼彻斯特编码，还有一些其他的编码规则。还有信道容量，模数转换，信噪比之类的概念也得了解
---

## Chap.3.数据和信号

### 模拟和数字

- 信息 要传输的，被人理解的内容
- 数据 对个人/程序有用，可以用信号表示
- 信号 物理层面的概念。可以用模拟和数字两种形式

信号的描述方式我们已经很熟悉了，就是频率，周期，相位之类的指标，再加上频域特征的表示。

### 带宽

- **带宽**：就是复合信号包含的频率范围
- **信噪比**：定义是$\frac{\text{信号能量}}{\text{噪波能量}}$
- **比特率**：1秒发送的位数

通道有两种类型：**低通通道（频率下限从0开始）和带通通道（从非0频率开始）**。同时，数字信号传输方式有两种：**基带传输和宽带传输**

- 基带传输：借助一个低通通道，将信号直接传输。但是数字信号是带宽无穷的复合模拟信号，因此这种方式在现实中总会存在失真。
	- 所需带宽和比特率成正比；想发送地更快，就需要更大的带宽
	- 要以1Mbps速率发送数据，最小带宽是1/2=500KHz。如果用到N次谐波，则再乘以N得到所需带宽。
- 宽带传输（使用调制）：使用带通通道时，只能使用这种方法发送数字信号。它在发送前将数字信号转换成模拟信号。

### 传输减损

三种类型：**衰减、失真和噪声**

### 数据速率限制

受制于**有效带宽、使用的信号电平数、通道的质量（噪声电平）** 这三个因素。

- 奈奎斯特定理：无噪通道时，理论最大比特率为$2\times\text{带宽}\times log_2L$，其中$L$是电平数。
- 香农定理：有噪声通道的理论容量为$\text{带宽}\times log_2(1+SNR)$。

香农容量定理给出数据速率的上限，奈奎斯特公式给出所需的信号电平数。

### 性能

- 吞吐量=$frame*bits/time$，表示单位时间内成功传输的数据量
- 延迟：有四个组成要素：传播时间、传输时间、排队时间、处理延迟
	- 传播时间：传输一个bit从原到目标的时间，取决于物理速度
	- 延迟：传播延迟+传输时间+排队时间+处理延迟
	- 传播延迟：距离/传播速度
	- 传输时间：报文长度/传输速度
- 带宽延迟积：$\text{带宽}\times\text{延迟}$，定义了能充满链路的位数

## Chap.4.数字传输

### 数字到数字转换

#### 线路编码

这是将数据转数字信号的技术。它将数字元素编码为信号元素，根据**每个信号元素承载的数字元素数量，我们定义比率r**。

数据速率和信号速率的关系如下：$S=c\frac{N}{r} (baud)$。其中N是数据速率，S是信号元素数量，r是信号元素的数据元素承载量。

线路编码会遇到几个问题：

- 基线偏移：接收到信号的平均功率（基线）在接收一长串0/1时，会产生偏移，不利于解码。
- 直流成分：长时间0/1时，会产生很低的频率成分，会给不允许低频/使用电耦合的系统带来问题。
- 自同步：接收/发送的间隔必须严格对应。长1/0可能会引起失去同步（不知道到底连续发送了几个连续的0/1）。
- 内置差错检测
- 抗干扰抗噪声能力
- 复杂性

#### 线路编码方案

主要是这几种

![](img/Pasted%20image%2020230609210936.png)

1. NRZ：不归零编码，它有N/2的信号速率，但是有DC成分问题

![](img/Pasted%20image%2020230609211704.png)

	1. NRZ-L：电平决定值，0是正电平，1是负电平
	2. NRZ-I：下一位是1则反相，0则不反相

2. RZ编码：三个值的编码，它的方式如下所示：

![](img/Pasted%20image%2020230609211836.png)

缺点是占用带宽大，以及实现复杂。

3. 双相-曼彻斯特编码：
	1. 普通版本：周期中点跳变，如下图。
	2. 差分版本：下一位是1就不反相，是0则反相。

![](img/Pasted%20image%2020230609212031.png)

它唯一的缺点是信号速率，是NRZ的两倍。

4. AMI
	1. AMI（交替传号反转）：传号就是1，所以意思是1交替用正负表示，0用0电平表示
	 2. 伪三元编码：1是0电平，0是正负交替表示

### 模拟到数字转换

### 传输模式

## Chap.5.模拟传输

## Chap.6.带宽利用

带宽利用是可用带宽的合理利用：

### 复用

只要连接两台设备的**介质带宽**比设备间**传输所要求的带宽**高时，该链路就可以被**共享**。复用就是**允许同时通过一条数据链路传输多个信号**的一组技术。

通过复用器（MUX）和分离器（DEMUX），我们可以将一个连接（link）划分为可以同时使用的多个通道（channel）。

复用器可以分为这几类：

- FDM：分频复用
- WDM：分带宽（波段）利用
- TDM：时分复用

前两者是模拟信号方式实现，而TDM是数字信号方式实现。

#### 频分多路复用(Frequency-Division Multiplexing)  

- FDM 是用来组合模拟信号的模拟多路复用技术；
- 载波频率之间的频率差能够容纳调制信号的带宽；
- 通道之间使用防护频带进行分隔，防止信号重叠；
- 载波频率不能影响原始的数据频率；
- 数字信号转换为模拟信号之后仍然可以使用FDM

![](img/Pasted%20image%2020230612153316.png)

大致思想如上。上面的图是时域表示不够直观，下图将三个4kHz信号合并到一个12kHz的连接上，用频域表示：

![](img/Pasted%20image%2020230612153449.png)

总的带宽就是每个频段信号的带宽加上防护频带的带宽（一般是通道数-1）之和。例如，有 5个通道，每个通道的带宽是 100kHz，全部进行多路复用。如果通道之间需要 10kHz 的防护频带以防止干扰，则链路的最小带宽是$5\times100+4\times10=540kHz$。这样的复用系统可以多级叠加使用。

#### 波分多路复用(Wavelength-Division Multiplexing)  

它和上面的FDM思想是一致的，只不过处理对象从电信号换成了光信号。

![](img/Pasted%20image%2020230612154352.png)

- 在复用器上将多个光源组成单一光信号；
- 在分离器上做相反的处理；
- 光源组合与分离由棱镜完成；
- WDM的一种应用是同步光纤网络(SONET)。

#### 同步时分多路复用(Synchronous Time-Division Multiplexing)

TDM类似于OS中任务管理的rr策略，将通道切分成多个小片段，按顺序轮流给每一个设备使用。这样，它就将许多低俗通道组合成了一个高速通道。

![](img/Pasted%20image%2020230612154544.png)

首先是同步时分复用。在同步TDM中,  链路速率是数据速率的n倍，并且比单元持续时间短 n 倍（如果没有附加同步位的话）。

>注意下图的称呼：帧中包含时隙，时隙数量是通道数量

![](img/Pasted%20image%2020230612154730.png)

例如，将 4个 1kbps的连接一起复用，每个单位为 1位，则复用前，一位的持续时间是$1/1kbps=1ms$，链路速率是通道速率的4倍，也就是$4kbps$。时隙的持续时间是复用前每位持续时间的$1/4$，也就是$250\mu s$。同时，也可以说位持续时间是数据速率$1/4kbps$的倒数，也就是$250\mu s$。一帧的持续时间：每帧有四个时隙，所以一帧的持续时间是$250\mu s$的4倍，也就是$1ms$。

>**一帧包含的数据量**，是由一帧包含的位数量（每个时隙的位长度x通道数量）和额外的同步位决定的（一般是1位）。
>而**帧速率**，则是输入链路的数据速率/每个时隙单元的位大小决定的。比如输入是$100kbps$，每个时隙$2$位，那么，疫苗就需要$100k\div2bit=50k$帧每秒的速率发送来保证链路不堵塞。
>然后是**数据速率**。考虑上面两个量的乘积，就是数据速率。

如果在某一个瞬间，一个线路没有数据流出，则那个位置在对应时隙空出来。这也就是空时隙(Empty slots)。

![](img/Pasted%20image%2020230612155353.png)

实际中，传入的数据速率可能不同，这时一般采用下面的策略：

- 多级复用（Multilevel Multiplexing）
![](img/Pasted%20image%2020230612155633.png)
- 多时隙分配（Multiple-slot Allocation）
![](img/Pasted%20image%2020230612155639.png)
- 脉冲填充（Pulse Stuffing）
![](img/Pasted%20image%2020230612155645.png)

一般，为了同步链路两侧信号，会设置帧指示位：![](img/Pasted%20image%2020230612155738.png)

同步TDM复用速率有一套DS标准：

![](img/Pasted%20image%2020230612155842.png)

#### 统计时分多路复用(Statistical Time-Division Multiplexing)

上面的同步TDM的一个缺点就是时隙的空缺，这样不能充分利用高速链路的带宽。因此有了第二种统计时分复用的方法：

![原理如图，比较简单，就不细说了](img/Pasted%20image%2020230612160032.png)

### 扩频

在扩频系统 SS中，也把来自某些源端的信号组合在一起形成一个更宽的带宽，可是目的略有不同。为达到此目的，扩频技术增加了冗余部分，扩展原始信号的频带满足每个站的需要。

#### 跳频扩频（Frequency Hopping Spread Spectrum，FHSS）  

如下图，将原始信号“跳跃”式扩展，来达到扩频目的。

![](img/Pasted%20image%2020230612160332.png)

#### 直接序列扩频（Direct Sequence Spread Spectrum，DSSS）

## Chap.7.传输介质

非屏蔽双绞线的分类：

![](img/Pasted%20image%2020230612163803.png)